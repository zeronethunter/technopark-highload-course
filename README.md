
# Amazon

## Содержание

* ### [Тема и целевая аудитория](#1)
  - #### [Тема](#1.1)
  - #### [Целевая аудитория](#1.2)
* ### [Расчет нагрузки](#2)
  - #### [Продуктовые метрики](#2.1)
  - #### [Технические метрики](#2.2)

## 1. Тема и целевая аудитория <a name="1"></a>

### 1.1 Тема <a name="1.1"></a>

[**Amazon**](https://www.amazon.com/) - это американская организация, одна из крупнейших в мире среди компаний, занимающихся продажей всевозможных товаров и услуг через интернет. Также это лидер в области продаж товаром массового спроса через систему интернет-сервисов.

### MVP:

- Создание профиля покупателя / продавца.
- Добавление товара в корзину.
- Покупка товара.
- Оценка товара с возможностью оставить комментарий.
- Навигация по товарам (каталог / поиск).
- Создание товаров / каталогов для продавцов.
- Склады и логистика.


### 1.2 Целевая аудитория <a name="1.2"></a>

- Месячный трафик составляет около 2.5 млрд. пользователей
- Аудитория на 59.8% состоит из мужчин и на 40.2% из женщин
- Самая большая возрастная группа посетителей - 25-34-летние (~0.7 млрд.)
- Таргетинг по странам:

| Страна           | Кол-во пользователей в месяц, % | Кол-во пользователей в месяц, млн |
|------------------|---------------------------------|-----------------------------------|
| США              | 82.67                           | 2 066 750                         |
| Канада           | 1.07                            | 26 750                            |
| Индия            | 1.06                            | 26 500                            |
| Великобритания   | 0.97                            | 24 250                            |
| Япония           | 0.72                            | 18 000                            |

### [Источник](https://www.similarweb.com/ru/website/amazon.com/)

## 2. Расчет нагрузки <a name="2"></a>

### 2.1 Продуктовые метрики <a name="2.1"></a>

- Месячная аудитория ~250 млн. [Источник](https://ru.ecomlife.pro/blog/kak-prodavat-na-amazon-iz-rossii)
- Дневная аудитория ~28 млн. [Источник](https://vc.ru/trade/594954-top-zarubezhnyh-marketpleysov-dlya-prodazhi-tovarov-v-2023-amazon-etsy-i-drugie)

#### Средний размер хранилища пользователя:

| Вид данных                                                            | Размер |
|-----------------------------------------------------------------------|--------|
| Аватар                                                                | ~2 Мб  |
| Личные данные (адреса, заказы, платежные данные, транзакции и т.д.)   | ~1 Мб  |

Итого: ~3 Мб

#### Общая статистика:
- Amazon доставляет 1.6 млн. посылок в день (18.5 посылок в секунду)
- В Amazon 9.1 млн. продавцов, из которых 2.3 млн. активных
- 44% покупок приходятся на электронику. Она несоменно дорогая, поэтому средний пользователь не будет добалять много товаров в корзину, тем более покупать товар, поэтому предположим, что в месяц пользователь добавляет в корзину 5 товаров

[Источник](https://landingcube.com/amazon-statistics/)
- 1-3% пользователей оставляют ревью после покупки товара 

[Источник](https://www.quora.com/What-percentage-of-buyers-write-reviews-on-Amazon)

- 6,264 продавцов присоединяются к Amazon ежедневно

[Источник](https://financesonline.com/amazon-statistics/)

- ~40% пользователей совершают покупку 1-2 раза в месяц (положим, что пользователь в среднем делает 1 покупку в месяц)

[Источник](https://amzmln.com/stati/amazon/statistika-amazon/)

- Согласно отчету статистической компании Marketplace Pulse на июнь 2021 года, на Amazon есть более 2,5 миллиона продавцов, и среди них наибольшее количество товаров предлагают крупные магазины и бренды, которые имеют более 10 000 товаров в своем ассортименте. Однако, большинство продавцов на Amazon имеют от 1 до 100 товаров в своем ассортименте.

#### Среднее количество действий пользователя по типам в день:

| Тип запроса                                       | Запросов в месяц |
|---------------------------------------------------|------------------|
| Добавление товара в корзину                       | 5                |
| Покупка товара                                    | 1                |
| Оценка товара с возможностью оставить комментарий | 0.03             |
| Создание товаров / каталогов                      | 50               |

### 2.2 Технические метрики <a name="2.2"></a>

#### Хранилище товара
- Amazon рекомендует, чтобы размер изображения составлял не менее 1000 пикселей в высоту или ширину, и чтобы для достижения оптимального качества и сжатия использовать формат файла JPEG или PNG.
В общем, размер фото товара на Amazon может колебаться от нескольких десятков килобайт до нескольких мегабайт, в зависимости от размеров изображения и его качества. Учитывая, что для электронных товаров, которые являются наиболее популярными продавцы часто прикрепляют еще и видео, получим около 5 Мб.
- В целом, количество фотографий для листинга продукта на Amazon может быть от 1 до 10 и более. Возьмем 5 штук, то есть на каждый товар приходится около 25 Мб данных.
- Всего товаров примерно 350 млн.

[Источник](https://www.repricerexpress.com/amazon-statistics/)

> 350 000 000 * 25 = 8 750 000 000 Мб

Итого: **8750 Тб**
> Или 8.75 Пб

#### Сетевой трафик

В месяц 2.5 млрд. (1 пользователь в 17 микросекунд, 58 000 пользователей в секунду) посетителей сайта, которые в [среднем](https://www.similarweb.com/ru/website/amazon.com/#traffic) посещают около 9 страниц за 7 минут. Предположим, что пользователь использует поиск по товарам 3 раза.

В поиске отображаются 16 товаров + 20 * 2 рекомендаций (посмотреть еще рекомендации) на каждой странице. В каталоге 24 товара + 20 * 2 рекомендаций. Соответственно, имеем 56 * 3 + 64 * 6 = 552 товара для отображения в среднем.

Каждый товар подгружает рейтинг и картинку, условно это 500 КБайт (кэширование учитывается далее). То есть получаем, что серфинг сайта показывает 552 * 500 = 276 000 КБ = 276 Мб данных.

Протокол передачи **HTTPS**.

Соответственно, раз в 17 микросекунд подключается новый пользователь, который в среднем раз 9 раз с интервалом в 46 секунд делает запрос (от 28Мб до 32Мб). 
С учетом кэширования и того, что страница может быть оформлением заказа, можно предположить, что запросы занимают около 1 Мб.

Новопришедших пользователей 58 000 в данную секунду, еще есть прошлые пользователи, которые делают n-ный запрос. Таких запросов 9 штук, поэтому прибавляем еще 9 * 58 000.

В секунду получается около 10 * 58 000 = 580 000 запросов/c для подгрузки товаров.

[30%](https://www.similarweb.com/ru/website/amazon.com/#traffic) из них - отказ, соответственно на бэк доходит около 174 000 запросов в секунду.

Итого:

> 580 000 * 1 = 580 000 Мбайт/c = 4 640 000 Мбит/c = 4 640 Гбит/c
> 
> 4 640 * 24 = 111 360 Гбит/c

Трафик в секунду: **4 640 Гбит/с**

Трафик в сутки: **111 360 Гбит/c**

#### RPS

> 1 / (30 * 24 * 60) = 0.0000231481 - столько 1 пользователь покупает в секунду
> 
> Предположим, что есть примитивная кореляция между кол-вом запросов и покупок в секунду
> 
> 580 000 * 0.0000231481 = 13.5 RPS (примерно, по статистике 18.5) - покупок
> 
> 13.5 * 3% = 0.4 RPS - отзывов о товаре
> 
> 3 из 9, как мы обусловились - это поиск, поэтому 580 000 / 3 ~= 190 000 RPS
> 
> 2.3 млн. активных продавцов, это мизерная часть от общего кол-ва посещений
> 
> Каждую секунду появляется 6 264 новых продавца или 4.35 в секунду, каждый делает в среднем по 5 запросов на создание товара.
> 
> Получаем 5 * 4.35 = 21.75 RPS
> 
> Остальное считаем за просмотры товаров

| Тип запроса                | RPS     |
|----------------------------|---------|
| Покупка товара             | 13.5    |
| Отзыв о товаре             | 0.4     |
| Поиск                      | 190 000 |
| Просмотр каталогов/товаров | 390 000 |
| Создание товара            | 21.75   |
